<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Movers | BPSAlgoAI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body style="background:#0b1220;">
    <div class="container" style="max-width:1400px;">
        <header class="header" style="margin-bottom:12px;">
            <div class="header-content">
                <h1>Market Movers Workspace</h1>
                <p class="subtitle">Full-screen watchlist, charts, and option chain</p>
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;">
                <a href="/" class="btn btn-small">‚¨Ö Back to Dashboard</a>
                <button id="refreshWatchlistBtn" class="btn btn-refresh">üîÑ Refresh Watchlist</button>
                <label style="display:flex;align-items:center;gap:6px;font-weight:500;">
                    <input type="checkbox" id="paperTradeToggle" checked style="accent-color:#1e40af;width:18px;height:18px;">
                    <span id="paperTradeLabel">Paper Trade</span>
                </label>
                <label style="display:flex;align-items:center;gap:6px;font-weight:500;">
                    <input type="checkbox" id="backtestToggle" style="accent-color:#f59e42;width:18px;height:18px;">
                    <span id="backtestLabel">Backtest</span>
                </label>
                <button id="startBtn" class="btn btn-start"><span class="btn-icon">‚ñ∂Ô∏è</span> Start Agent</button>
                <button id="stopBtn" class="btn btn-stop" disabled><span class="btn-icon">‚èπÔ∏è</span> Stop Agent</button>
            </div>
        </header>

        <section class="card" style="margin-bottom:14px;">
            <div class="watchlist-tabs" style="margin-bottom:10px;display:flex;gap:8px;flex-wrap:wrap;align-items:center;">
                <button class="watchlist-tab" data-tab="algo_top10" style="font-weight:600;">üìä Algo Watchlist</button>
                <div style="display:flex;gap:6px;align-items:center;">
                    <input type="text" id="stockSearchInput" placeholder="Search symbol (e.g., RELIANCE, TCS)" style="padding:8px 12px;border:1px solid #334155;border-radius:6px;background:#0f172a;color:#fff;width:250px;" />
                    <button id="addStockBtn" class="btn btn-small" style="background:#10b981;">‚ûï Add</button>
                </div>
                <button id="viewAlgoPicksBtn" class="btn btn-small" style="margin-left:auto;">‚ö° View Algo Picks</button>
            </div>
            <div class="watchlist-data watchlist-table-wrapper" id="watchlistTabContent" style="max-height:560px;overflow:auto;">
                <p class="placeholder">Loading watchlist...</p>
            </div>
        </section>

        <section class="card" style="margin-bottom:14px;">
            <div style="display:flex;gap:18px;flex-wrap:wrap;align-items:flex-start;">
                <div style="flex:1;min-width:320px;">
                    <h3>Algo Picks (Top 10)</h3>
                    <table id="opportunitiesTable" class="data-table">
                        <thead><tr><th>Symbol</th><th>Strike</th><th>Price</th><th>Change %</th><th>Score</th></tr></thead>
                        <tbody><tr><td colspan="5" style="text-align:center; padding:12px;">Waiting for agent...</td></tr></tbody>
                    </table>
                </div>
                <div style="flex:1;min-width:320px;">
                    <h3>Live Feed</h3>
                    <div id="liveFeed" style="height:260px; overflow:auto; background:#0f172a; color:#e2e8f0; padding:10px; border-radius:8px; font-size:14px;"></div>
                </div>
            </div>
        </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/chart.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>
